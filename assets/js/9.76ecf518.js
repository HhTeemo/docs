(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{365:function(v,n,t){"use strict";t.r(n);var _=t(42),e=Object(_.a)({},(function(){var v=this,n=v.$createElement,t=v._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"linux-基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-基础"}},[v._v("#")]),v._v(" Linux 基础")]),v._v(" "),t("h2",{attrs:{id:"对操作系统进行信息查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#对操作系统进行信息查询"}},[v._v("#")]),v._v(" 对操作系统进行信息查询")]),v._v(" "),t("p",[v._v("打开终端后的提示")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("[root@xiyangyang Desktop]# 执行的命令\n[当前登录的用户名称@主机名称 当前所在路径]#\n# 用户身份为超级管理员\n$ 用户身份为普通用户\n")])])]),t("p",[v._v("先了解当前系统的信息")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("硬盘大小\nfdisk -l\n/dev/sda 操作系统中第一块硬盘的名称以及所在路径\nlinux操作系统中一切皆文件\nsd（硬盘类型）a（第一块硬盘）\n\n内存大小\ncat /proc/meminfo\n\nCPU类型\ncat /proc/cpuinfo\n\n关机和重启的命令\nreboot 重启\npoweroff 关机\n")])])]),t("h2",{attrs:{id:"linux-操作系统树状结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-操作系统树状结构"}},[v._v("#")]),v._v(" linux 操作系统树状结构")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("目录 == 文件夹\ncd change directory .. 返回上一级目录\npwd 列出当前所在目录中的内容\nls list列出当前目录中的内容\n/ --- 操作系统的起始路径根路径\n/bin --- 普通用户和管理员都可以执行的命令\n/sbin --- 只有管理员才能执行的命令（关机重启）\n/boot --- 引导 主引导目录 独立的分区 启动菜单 内核\n/dev --- device设备 设备文件存放目录\n/etc --- 配置文件存放目录\n/home --- 普通用户的家目录\n/root --- 管理员的家目录\n/media --- 光驱的挂载目录\n/mnt --- 临时设备挂载目录\n/proc --- 里面的数据都在内存中，进程的所在目录\n/tmp --- 临时文件存放目录\n/usr --- 第三方软件的安装目录\n/var --- 常变文件存放目录 日志文件 邮件文件\n\n")])])]),t("h2",{attrs:{id:"文件系统分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件系统分类"}},[v._v("#")]),v._v(" 文件系统分类")]),v._v(" "),t("p",[v._v("Tab 键功能 命令字和已存在的文件名称补齐的作用")]),v._v(" "),t("p",[v._v("清除屏幕内容 Ctrl+l")]),v._v(" "),t("p",[v._v("终止快捷键 Ctrl+c")]),v._v(" "),t("p",[v._v("linux 系统中分辨文件类型")]),v._v(" "),t("p",[v._v("蓝色 --- 目录")]),v._v(" "),t("p",[v._v("黑色 --- 普通文件")]),v._v(" "),t("p",[v._v("浅蓝色 --- 符号链接（快捷方式）")]),v._v(" "),t("p",[v._v("黑色黄底 --- 设备文件 硬盘 sda")]),v._v(" "),t("p",[v._v("绿色 --- 带有执行权限的文件")]),v._v(" "),t("p",[v._v("红色 --- 压缩包")]),v._v(" "),t("p",[v._v("紫色 --- 图片 模块文件")]),v._v(" "),t("h2",{attrs:{id:"增删改查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增删改查"}},[v._v("#")]),v._v(" 增删改查")]),v._v(" "),t("p",[v._v("查询：查看目录下有哪些内容，查看文件中的内容")]),v._v(" "),t("p",[v._v("ls命令 cat命令")]),v._v(" "),t("p",[v._v("创建：创建文件 创建目录")]),v._v(" "),t("p",[v._v("touch 文件名")]),v._v(" "),t("p",[v._v("echo “hello”> 文件")]),v._v(" "),t("p",[v._v("mkdir 目录名     make directory")]),v._v(" "),t("p",[v._v("改：剪切和复制")]),v._v(" "),t("p",[v._v("mv 重命名和剪切")]),v._v(" "),t("p",[v._v("cp 拷贝文件")]),v._v(" "),t("p",[v._v("符号链接")]),v._v(" "),t("p",[v._v("ln -s 源文件（绝对路径） 建立的链接文件")]),v._v(" "),t("p",[v._v("删除")]),v._v(" "),t("p",[v._v("rm remove 删除")]),v._v(" "),t("p",[v._v("rm -f 文件 强制删除")]),v._v(" "),t("p",[v._v("rm -rf 目录 删除目录")]),v._v(" "),t("h2",{attrs:{id:"获取命令字的帮助信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取命令字的帮助信息"}},[v._v("#")]),v._v(" 获取命令字的帮助信息")]),v._v(" "),t("p",[v._v("linux 命令字格式")]),v._v(" "),t("p",[v._v("命令字 [选项] [文件或者目录]")]),v._v(" "),t("p",[v._v("帮助手册")]),v._v(" "),t("p",[v._v("man ls")]),v._v(" "),t("p",[v._v("-a 显示隐藏文件")]),v._v(" "),t("p",[v._v("-l 显示文件的详细信息")]),v._v(" "),t("p",[v._v("-lh 显示文件大小")]),v._v(" "),t("p",[v._v("-R 递归显示目录中子目录的内容")]),v._v(" "),t("p",[v._v("内部命令 命令解释器自带的命令 help cd")]),v._v(" "),t("p",[v._v("外部命令 安装的第三方软件带的命令字 基本都有帮助手册")]),v._v(" "),t("p",[v._v("grep \"Failed password\" /var/log/secure  | awk '{print $11}' | sort")]),v._v(" "),t("p",[v._v("安全日志： /var/log/secure")]),v._v(" "),t("p",[v._v("grep  过滤关键字")]),v._v(" "),t("p",[v._v("| 管道符号 将前一条命令的输出 作为后一条命令的 处理参数\nawk 过滤字段 $11 以空格作为分隔符 第11个字段输出\nsort 排序\nuniq 统计  -c  显示合并的数量")]),v._v(" "),t("p",[v._v("cat -n  /etc/man.config | more  现实带行号的分页查看")]),v._v(" "),t("p",[v._v("tail  -f  /var/log/secure   跟踪日志变化")]),v._v(" "),t("p",[v._v("wc -l  文件显示文件行数")]),v._v(" "),t("p",[v._v("du -sh  目录名称  统计目录占用磁盘空间大小")]),v._v(" "),t("h2",{attrs:{id:"压缩和解压缩"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#压缩和解压缩"}},[v._v("#")]),v._v(" 压缩和解压缩")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("/tmp 目录中建立一个大小为 100m 的文件 bigfile\ndd if=/dev/zero of=/tmp/bigfile bs=1M count=100\ninputfile 输入文件\noutputfile 输出文件\nbs 单位\ncount 计算器\n")])])]),t("p",[v._v("gzip 文件名称 --- 压缩文件")]),v._v(" "),t("p",[v._v("gunzip 压缩包 --- 解压缩")]),v._v(" "),t("p",[v._v("file 文件名 --- 查看文件类型信息")]),v._v(" "),t("p",[v._v("bzip2 文件名称 --- 压缩文件")]),v._v(" "),t("p",[v._v("bunzip2 压缩包 --- 解压缩")]),v._v(" "),t("p",[v._v("对目录进行打包压缩")]),v._v(" "),t("p",[v._v("tar -cf /tmp/allfile.tar /tmp/allfile")]),v._v(" "),t("p",[v._v("将allfile打包成allfile.tar")]),v._v(" "),t("p",[v._v("tar -tvf allfile.tar")]),v._v(" "),t("p",[v._v("查看allfile.tar包中的文件信息")]),v._v(" "),t("p",[v._v("tar -jcf /root/Desktop/1901class.tar.bz2 1901class/\n-j 使用bzip2压缩工具压缩\n-z 使用gzip压缩工具压缩\n-c create 创建\n-f  后面跟新建的文件名")]),v._v(" "),t("p",[v._v("tar -tf  /root/Desktop/19class.tar.gz\n-t 不解压缩查看文件内容")]),v._v(" "),t("p",[v._v("tar -xf 1901class.tar.gz -C /opt\n-x 解压缩并解包\n-C 指定解压路径")]),v._v(" "),t("p",[v._v("vim 编辑器")]),v._v(" "),t("p",[v._v("命令模式")]),v._v(" "),t("p",[v._v("输入i进入输入模式")]),v._v(" "),t("p",[v._v("2yy 复制当前及下一行")]),v._v(" "),t("p",[v._v("p 粘贴到当前行")]),v._v(" "),t("p",[v._v("dd 删除当前行")]),v._v(" "),t("p",[v._v("gg 回到第一行")]),v._v(" "),t("p",[v._v("G 回到最后一行")]),v._v(" "),t("p",[v._v("50G 到第50行")]),v._v(" "),t("p",[v._v("40-> 光标向右移动40个字符")]),v._v(" "),t("p",[v._v("27G  15x  删除当前光标向右一共15个字符")]),v._v(" "),t("p",[v._v("u撤销上一次操作")]),v._v(" "),t("p",[v._v("输入模式")]),v._v(" "),t("p",[v._v("按Esc进入命令模式")]),v._v(" "),t("p",[v._v("末行模式")]),v._v(" "),t("p",[v._v("输入：进入末行模式")]),v._v(" "),t("p",[v._v("：wq      wirte qutie 保存并退出")]),v._v(" "),t("p",[v._v("：q!\t不保存并退出")]),v._v(" "),t("p",[v._v("：set nu 显示行号")]),v._v(" "),t("p",[v._v("：%s/old/new/g 每一行中的old替换成new")]),v._v(" "),t("p",[v._v("：50，56 d 删除50~56行的数据")]),v._v(" "),t("p",[v._v("： /bzip2  向下搜索关键字")]),v._v(" "),t("p",[v._v("：w  /tmp/man.test  另存为")]),v._v(" "),t("h2",{attrs:{id:"linux-操作系统的软件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-操作系统的软件安装"}},[v._v("#")]),v._v(" linux 操作系统的软件安装")]),v._v(" "),t("p",[v._v("软件的分类")]),v._v(" "),t("ul",[t("li",[t("p",[v._v("源码包")])]),v._v(" "),t("li",[t("p",[v._v("封装后的软件包")])])]),v._v(" "),t("p",[v._v("GNU社区")]),v._v(" "),t("p",[v._v("源码包的特点")]),v._v(" "),t("p",[v._v("1、源码一般都是压缩包")]),v._v(" "),t("p",[v._v("2、可以跨平台安装")]),v._v(" "),t("p",[v._v("3、更新速度块")]),v._v(" "),t("p",[v._v("4、安装过于繁琐")]),v._v(" "),t("p",[v._v("5、可以指定安装哪些功能")]),v._v(" "),t("p",[v._v("编译 可以指定安装的路径和编译所需要的功能")]),v._v(" "),t("p",[v._v("源码包安装的注意事项")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("解包")])]),v._v(" "),t("li",[t("p",[v._v("进入解压路径了解软件的作用以及安装方法")])]),v._v(" "),t("li",[t("p",[v._v("通过配置脚本指定安装路径和功能，并且声称makefile编译脚本文件")]),v._v(" "),t("p",[v._v("./configure  --prefix=/usr/local/webserver  指定安装路径生成makefile文件")]),v._v(" "),t("p",[v._v("make\t\t通过make命令控制makefile文件进行顺序编译")]),v._v(" "),t("p",[v._v("make install\t将编译完成的内容拷贝到安装目录下")]),v._v(" "),t("p",[v._v("/usr/local/webserver/bin/apachectl start\t启动apache 服务器")])]),v._v(" "),t("li",[t("p",[v._v("/usr/local/webserver/bin/apachectl  stop  关闭apache")])])]),v._v(" "),t("p",[v._v("封装后的软件包")]),v._v(" "),t("p",[v._v("1、经过压缩处理")]),v._v(" "),t("p",[v._v("2、安装便捷1条命令即可安装")]),v._v(" "),t("p",[v._v("3、更新速度慢")]),v._v(" "),t("p",[v._v("4、不能指定安装路径和安装功能")]),v._v(" "),t("p",[v._v("5、不支持跨平台安装")]),v._v(" "),t("p",[v._v("特点后缀")]),v._v(" "),t("p",[v._v("rpm red hat package manager")]),v._v(" "),t("p",[v._v("deb Debian")]),v._v(" "),t("p",[v._v("源码包 不考虑系统的版本")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("我有没有安装过该软件")]),v._v(" "),t("p",[v._v("rpm -qa 列出所有已经安装过的rpm软件包")]),v._v(" "),t("p",[v._v("rpm -qa | grep “软件名” 查看该软件是否安装")])]),v._v(" "),t("li",[t("p",[v._v("确认该软件的作用")]),v._v(" "),t("p",[v._v("rpm -qpi 软件名")])]),v._v(" "),t("li",[t("p",[v._v("确认该软件安装的路径")]),v._v(" "),t("p",[v._v("rpm -qpl 软件名")])]),v._v(" "),t("li",[t("p",[v._v("安装软件")]),v._v(" "),t("p",[v._v("rpm -ivh 软件名")])]),v._v(" "),t("li",[t("p",[v._v("使用软件")])]),v._v(" "),t("li",[t("p",[v._v("卸载软件")]),v._v(" "),t("p",[v._v("rpm -e 软件名")])])]),v._v(" "),t("p",[v._v("卸载 vim 编辑器工具")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("该软件的名称")]),v._v(" "),t("p",[v._v("rpm -qa | grep “vim”")])]),v._v(" "),t("li",[t("p",[v._v("卸载")]),v._v(" "),t("p",[v._v("rpm -e vim-common 提示有依赖关系")]),v._v(" "),t("p",[v._v("所以先卸载 rpm -e vim-enhanced")])]),v._v(" "),t("li",[t("p",[v._v("安装")]),v._v(" "),t("p",[v._v("rpm -ivh vim-common")]),v._v(" "),t("p",[v._v("rpm -ivh vim-enhanced")])])]),v._v(" "),t("p",[v._v("解决依赖关系问题")]),v._v(" "),t("p",[v._v("1、软件依赖关系列表保存在光盘中")]),v._v(" "),t("p",[v._v("2、使用yum源工具指定光盘所在路径")]),v._v(" "),t("p",[v._v("3、通过yum源工具安装卸载带有依赖关系的软件")]),v._v(" "),t("p",[v._v("/etc/yum.repos.d")]),v._v(" "),t("p",[v._v("所有yum源的默认存放目录")]),v._v(" "),t("p",[v._v("所有yum源文件的特点都是.repo结尾")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("要告诉操作系统依赖关系列表的位置")]),v._v(" "),t("p",[v._v("mkdir  bak")]),v._v(" "),t("p",[v._v("mv  C*  bak   移除所有yum源文件 避免干扰")]),v._v(" "),t("p",[v._v("vim  1901class.repo  建立自己的yum源文件")]),v._v(" "),t("p",[v._v("[1901source]   #标签")]),v._v(" "),t("p",[v._v("name=1901    #描述")]),v._v(" "),t("p",[v._v("baseurl=file:/media/CentOS #定义依赖关系文件所在位置")]),v._v(" "),t("p",[v._v("gpgcheck=0   #是否做密钥对验证（互联网验证时打开1）")])]),v._v(" "),t("li",[t("p",[v._v("通过 yum 工具进行软件的卸载与安装")]),v._v(" "),t("p",[v._v("yum remove  vim-common  卸载软件")]),v._v(" "),t("p",[v._v("yum  install  vim-enhanced  安装软件")]),v._v(" "),t("p",[v._v("yum  clean  all  清除以前的yum源缓存")]),v._v(" "),t("p",[v._v("yum install  wireshark-gnome  安装抓包软件")])])]),v._v(" "),t("h2",{attrs:{id:"操作系统中的用户分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作系统中的用户分类"}},[v._v("#")]),v._v(" 操作系统中的用户分类")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("/etc/passwd   保存了系统中所有用户的信息\nroot:x:0:0:root:/root:/bin/bash\n字段1：用户名\n字段2：密码占位符(废弃)\n字段3：uid号\n\tuid 用户的身份标识0为超级管理员  500-60000普通用户  1-499 程序用户（不能登录系统）\n字段4：用户的基本组id号  先有组才有用户\n字段5：用户信息记录位置（废弃）\n字段6：用户的家目录\n字段7：用户登录系统后使用的命令解释器\n\n/etc/shadow  影子 记录系统中用户的密码信息\nroot:$6$A2$A5p:18129:0:99999:7:::\n字段1：用户名\n字段2：通过sha-512以及salt值加密后的密文\n字段3：距离1970年1月1日密码最近一次的修改时间\n字段4：密码的最短有效期\n字段5：密码的最长有效期  建议90天\n字段6：密码过期前7天警告\n字段7：密码的不活跃期\n字段8：密码距离1970年1月1日的失效时间\n\n/etc/group 记录了系统中的组信息\n\n\n")])])]),t("p",[v._v("用户和组操作")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("useradd  \n -u  指定 uid号\n -g  指定 基本组\n -G  指定 附加组\n -s  指定用户登录的命令解释器   -s  /sbin/nologin 不允许登录  -s  /bin/bash 允许登录\n\nusermod  选项同上\n\nuserdel\n-r  删除用户的家目录\n\ngroupadd  \n -g  指定gid号\ngroupmod  选项同上\ngroupdel   删除组\n\npasswd   用户名\n-S  查看用户密码状态\n-l  锁定用户\n-u  解锁用户密码\n-d  删除用户密码\n\nchage -M 90  用户名   修改用户密码的最长有效期\n\nvisudo  为普通用户设定管理员执行的命令\n\n用户名  登录的主机=允许执行的命令          NOPASSWD:ALL\nallen   ALL=（root）   NOPASSWD：ALL\n\nallen用户登录\nsudo  init 6 提权使用root用户命令\n\n")])])]),t("p",[v._v("rpm -qpi  --scripts  包名    显示详细信息后同时显示包中封装的 脚本\nyum源中 gpgcheck=1  启用公钥验证\ngpgkey=file:/etc/gki/rpm-gpg/RPM-GPG-KEY-CentOS-6  指定公钥位置")]),v._v(" "),t("h2",{attrs:{id:"文件和目录权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件和目录权限"}},[v._v("#")]),v._v(" 文件和目录权限")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("d  rwx   r-x  r-x  .  root（文件的所属者） root（文件的所属组）  目录\n-  rw-   r--  r--  .  root（文件的所属者） root（文件的所属组）  文件\n\n字段1：表示文件的类型 d 目录  - 文件  l 符号链接  c 字符型设备  b block块设备\n字段2：文件所属者的权限\n            r                 w                  x\n目录   列出目录内容    添加删除目录中的文件     进入该目录\n文件        读                 写               执行\n\n字段3：文件所属组的权限\n字段4：其他用户的权限（既不是文件的所属者，也不在文件的所属组中）\n\nchmod  a=--- 目录\nchmod  g=rwx 目录\nchmod  o=rx 目录\n修改文件属性\nchmod   对象 运算符号  权限   文件或者目录\n对象：u（user所属者）   g（goup所属组）   o（other其他）  a（all所有）\n运算符号： + 赋权  - 撤权 = 指定权限\n\n\n")])])]),t("p",[v._v("普通用户 rm -fr /*   会删除家目录的内容\n切换成用户Allen  删除自己家中的内容  rm -fr  .*  删除隐藏文件\n使用root用户进行恢复\nrm -rf /home/allen      使用root 用户先删除原来的家目录\ncp  -r  /etc/skel  /home/allen   拷贝用户家目录的模板文件到home中\nchown  -R  allen:allen   /home/allen  修改家目录的所属者和所属组\nchown  修改文件所属者和所属组\n-R  递归修改")]),v._v(" "),t("p",[v._v("文件的acl 设定某个用户有不同权限\nman  setfacl   为文件设定访问控制列表\n-m  修改   u：用户名:权限  文件或者目录")]),v._v(" "),t("p",[v._v("八进制赋权法\nr=4  w=2  x=1\nrwxr-xr-x\n755\nrw-r--r--\n644")]),v._v(" "),t("p",[v._v("0    000   ---\n1    001   --x\n2    010   -w-\n3    011   -wx\n4    100   r--\n5    101   r-x\n6    110   rw-\n7    111   rwx")]),v._v(" "),t("p",[v._v("三个特殊权限")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v('t 粘滞位  （只对目录有效）\n\n在目录中建立的文件只有文件的所属者可以删除。\n\nchmod  777 /tmp/test\n\nchmod o+t /tmp/test\n\n方法2\n\nchmod  1777  /tmp/test\n\n\n\nsgid (只对目录有效)\n在目录中建立的文件或者目录属组会继承父目录的属组\nchmod 777 /tmp/test\nchmod g+s /tmp/test\n方法2\nchmod 2777 /tmp/test\n\n\n\nsuid (只对可执行文件有效)\n当一个可执行文件具有suid权限，无论谁运行该文件，谁就具有该文件所属者的权限。\n\nwhich   vim\nchmod u+s /usr/bin/vim\nchmod 4755 /usr/bin/vim\n\nwhich  find\nchmod u+s /bin/find\n普通用户 \nfind  /opt  -name rh -exec "/bin/dash" \\;\n')])])]),t("h2",{attrs:{id:"获得root权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获得root权限"}},[v._v("#")]),v._v(" 获得root权限")]),v._v(" "),t("p",[v._v("find  /  -perm  4755  针对权限进行查询系统中所有具有suid权限的命令\nfind / -perm +4000  忽视后面权限只要带suid的都查")]),v._v(" "),t("p",[v._v("练习：\n1、在/tmp目录中建立一个test目录并对其设定粘滞位以及sgid权限观察效果\n2、为vim编辑器以及find命令设定suid，并尝试用find命令提权成为root用户")]),v._v(" "),t("p",[v._v("visudo")]),v._v(" "),t("p",[v._v("jerry  ALL=(root)    NOPASSWD: /usr/bin/man\n切换为jerry\nsudo  man  ls\n输入! 命令表示以root用户在运行命令")]),v._v(" "),t("p",[v._v("逻辑卷 格式化 挂载")]),v._v(" "),t("p",[v._v("fdisk  -l  看到sda的分区  sda1  sda2")]),v._v(" "),t("p",[v._v("挂载和卸载\n1、将光驱从挂载目录中卸载掉\numount  /dev/sr0  卸载光驱\n2、挂载光驱\nmount  /dev/sr0  /media")]),v._v(" "),t("p",[v._v("挂载：将块设备 与 一个目录进行连接， 进入该目录相当于进入该设备")]),v._v(" "),t("p",[v._v("1、为虚拟机单独添加3快磁盘 sdb  sdc sdd\n2、将三块磁盘转换为物理卷pv 每个20G\npvcreate /dev/sd[bcd]\n3、将三块磁盘合并成60G的卷组\nvgcreate vg_1901 /dev/sdb /dev/sdc  建立一个名为vg_1901的卷组 里面磁盘/dev/sdb和c\nvgdisplay vg_1901  显示卷组信息\nvgextend vg_1901 /dev/sdd   添加物理卷进入卷组 （卷组扩容）\n4、从60G卷组中拿出30G建立逻辑卷 格式化挂载\nlvcreate -L 30G -n lv_1901 vg_1901   建立一个名为lv_1901的逻辑卷大小30G\n5、格式化逻辑卷\nmkfs.ext4  /dev/mapper/vg_1901-lv_1901\n6、挂载使用\nmkdir  /mnt/1901lvm\nmount /dev/mapper/vg_1901-lv_1901  /mnt/1901lvm  挂载\n7、验证\ndf  -Th  是否挂载成功\n8、将刚刚建立出的30G逻辑卷扩容到50G\nlvextend -L +20G /dev/mapper/vg_1901-lv_1901  逻辑卷扩容\nresize2fs  /dev/mapper/vg_1901-lv_1901   文件系统扩容\n9、验证df -Th")]),v._v(" "),t("p",[v._v("1、当前目录权限如下rwxrwxrwx，将权限修改为只有所属者可以进入并添加文件，属组用户可以进入浏览，其他用户无法进入。通过命令修改权限  rwxr-x---\nchmod  g-w,o=--- 目录\nchmod  750  目录")]),v._v(" "),t("p",[v._v("2、如何为系统中的find命令设定suid权限，设定后如何通过命令找出系统中哪些命令具有suid权限\nwhich  find\nchmod  u+s  /bin/find\nfind  /  -perm +4000\n3、系统中有三块硬盘sdb sdc sdd 如何将其组合并建立一个大小为10G的逻辑卷，格式化并挂载到/mnt/lvm使用\npvcreate /dev/sd[bcd]\nvgcreate  vg_lsc  /dev/sdb /dev/sdc /dev/sdd\nlvcreate -L 10G  -n  lv_lsc  vg_lsc\nmkfs.ext4  /dev/mapper/vg_lsc-lv_lsc\nmount /dev/mapper/vg_lsc-lv_lsc  /mnt/lvm\n4、根据3题设定逻辑卷将其进行扩容到20G\nlvextend -L +10G  /dev/mapper/vg_lsc-lv_lsc\nresize2fs /dev/mapper/vg_lsc-lv_lsc\ndf -Th")]),v._v(" "),t("h2",{attrs:{id:"了解系统的启动流程-故障修复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#了解系统的启动流程-故障修复"}},[v._v("#")]),v._v(" 了解系统的启动流程 （故障修复）")]),v._v(" "),t("p",[v._v("基本输入输出系统 basic  input  output  system （bios）-> 硬盘 -> 分区表 -> 主引导分区/dev/sda1 引导菜单开始工作 GRUB\nGRUB引导菜单 负责引导进入系统\n按e进入编辑模式\nroot (hd0,0)\nkernel  /vmlinuzxxxxx  ro root=/dev/mapper/xxxxxx   添加数字1\ninitrd /initxxxxx.img")]),v._v(" "),t("p",[v._v("-> 启动进程/sbin/init 初始化进程  pid为1 第一个启动的进程\n/etc/inittab    （运行级别）\n0  关机\n1  单用户\n2  多用户无网络\n3  字符模式\n4  未启用\n5  图形模式\n6  重启\nid:5:initdefault:")]),v._v(" "),t("p",[v._v("/etc/rcX.d 目录 保存了所有进程启动脚本的链接\nK  kill 表示该进程在该级别启动时候默认不启动\nS  start  表示该进程默认启动")]),v._v(" "),t("p",[v._v("chkconfig  --list  列出所有开机以后启动的进程名称\nchkconfig --level 2345  bluetooth  on|off  设定该服务在2345级别默认的启动状态")]),v._v(" "),t("p",[v._v("为grub引导菜单加密过程\nvim /boot/grub/grub.conf  配置文件\ntitle 上输入\npassword   --encrypt  加密的密文")]),v._v(" "),t("p",[v._v("#grub-crpyt 命令生成\n密码123\n确认123")]),v._v(" "),t("p",[v._v("重启系统验证是否加密成功")]),v._v(" "),t("p",[v._v("练习：1、修改/etc/inittab文件中的默认值，为6 重启系统进行修复\n2、将系统中一个名为NetworkManager的服务 进行永久关闭使其开机无法启动\n3、为grub引导菜单加密重启后验证。")]),v._v(" "),t("p",[v._v("==================\ngrub引导菜单修复\ncd /boot/grub\nmv grub.conf  grub.conf.bak\n重启验证")]),v._v(" "),t("p",[v._v("grub>root   (hd0,0)\ngrub>kernel   /vmlinuzxxxxxxxx ro root=/dev/mapper/vg_xxxx-lv_root\ngrub>initrd   /initxxxxx.img\ngrub>boot")]),v._v(" "),t("p",[v._v("救援模式 （相当于winpe系统）相当于光盘中的微型\n进入救援模式 删除grub引导菜单密码 以及root密码")]),v._v(" "),t("p",[v._v("1、使用已经挂载的逻辑卷  用来备份分区表\nmount /dev/mapper/vg_1901-lv_1901  /mnt/1901lvm\n2、备份分区表到逻辑卷\ndd if=/dev/sda of=/mnt/1901lvm/mbr.bak bs=512 count=1\n3、破坏sda的分区表\ndd if=/dev/zero of=/dev/sda bs=512 count=1\n4、重启后进入救援模式修复，使得系统可以重新进入\n查看卷组名称并激活\nvgscan  查看名称\nvgchange  -a  y  vg_1901  激活卷组中所有逻辑卷\nmkdir  /mnt/1901lvm\nmount  /dev/mapper/vg_1901-lv_1901 /mnt/1901lvm\ndd if=/mnt/1901lvm/mbr.bak  of=/dev/sda\nreboot 重启验证")]),v._v(" "),t("p",[v._v("解压缩openssh.tar.gz\n./configure\nmake\nmake install\n桥接后ip地址获取之后告诉我ip")]),v._v(" "),t("p",[v._v("1、centos6系统系统一共有几个工作模式？其中如果希望系统开机后默认进入字符模式，应该如何设定\n0  1  2  3   4  5  6\nvim  /etc/inittab\nid:3:initdefault:\n2、说出对sda分区表备份的命令，以及对sda分区表还原的命令\ndd if=/dev/sda  of=/mnt/1901lvm/mbr.bak  bs=512  count=1\ndd if=/mnt/1901lvm/mbr.bak of=/dev/sda\ndd if=/dev/zero  of=/dev/sda bs=512  count=1\n3、进入救援模式后硬盘数据默认的挂载路径在哪？如何切换根目录为该路径\nchroot /mnt/sysimage\n4、grup引导菜单被破坏后，如何手动输入进入系统\nroot (hd0,0)\nkernel /vmlinuzxxxx  ro root=/dev/mapper/vg_xxx-lv_root\ninitrd  /initxxxxxxx\nboot\n5、系统中哪个目录中保存了系统启动后会默认启动哪些进程\ncd /etc/rc0-6.d")]),v._v(" "),t("p",[v._v("查看文件时间的命令\nstat   文件\nA  访问时间\nM  修改时间\nC  属性变更时间")]),v._v(" "),t("p",[v._v("find  /  -ctime  天数    按照属性变更时间查找文件")]),v._v(" "),t("p",[v._v("硬链接 ：\n1、不能对目录建立\n2、不能跨分区建立\n3、源文件删除硬链接仍然有效\n符号链接：\n1、能对目录建立\n2、能跨分区建立\n3、源文件删除符号链接失效")]),v._v(" "),t("p",[v._v("tune2fs -l  /dev/sda1  查看文件系统中的详细信息\ninode  节点信息    block  块信息")]),v._v(" "),t("p",[v._v("验证当inode节点被用完能否建立新文件\nvim test.sh\n#!/bin/bash\nnum=0\nwhile [  $num -lt  1024 ]\ndo\nlet num++\ntouch /xxxx/$num\ndone")]),v._v(" "),t("p",[v._v("练习\n1：通过stat观察文件三个时间内容，出发每个时间的不同变化\n2、找出系统中一天以内产生文件属性变化的文件\n3、建立一个小的逻辑卷定义block区域为4096字节，查看inode结点数值\n4、建立脚本耗尽节点观察效果")]),v._v(" "),t("p",[v._v('进程 top  查看进程状态\nvim /tmp/test.txt\n#!/bin/bash\nwhile  [  2 -lt 3 ]\ndo\necho "caimujun"\ndone\nchmod +x test.txt')]),v._v(" "),t("p",[v._v("一次性计划任务\nat  时间\nat> 命令\nat> ctrl+d 结束编辑")]),v._v(" "),t("p",[v._v("vim /etc/crontab  周期计划任务配置文件\n分       时       日      月         周    用户名   命令\n0-59  0-23  1-31  1-12    0-7")]),v._v(" "),t("hr"),v._v(" "),t("p",[v._v("top 命令进入后 输入k 杀模式  输入pid号 以及级别 9 结束进程")]),v._v(" "),t("p",[v._v("/etc/init.d/NetworkManager  stop  立即关闭 网络管理配置服务\nip addr  查看网卡ip\neth0\nethernet  以太网  0 第一块")]),v._v(" "),t("p",[v._v("ip addr  add 10.0.105.xx/24  dev  eth0    为eth0设定ip地址以及子网掩码\nip link set eth0 up    激活网卡\nip route       查看网关\nip route add default via 10.0.105.1   添加默认网关\ndns   配置\nvim /etc/resolv.conf\nnameserver  114.114.114.114")]),v._v(" "),t("p",[v._v("/etc/init.d/network restart  重启网络服务")]),v._v(" "),t("p",[v._v("kali网卡配置文件\nvim /etc/network/interfaces")]),v._v(" "),t("p",[v._v("auto eth0\niface eth0  inet static  设定ip地址为静态配置\naddress  10.0.105.xx     ip地址\nnetmask 255.255.255.0  子网掩码\ngateway 10.0.105.1   网关")]),v._v(" "),t("p",[v._v("vim /etc/resolv.conf   dns配置文件")]),v._v(" "),t("p",[v._v("/etc/init.d/networking restart    重启网络服务")]),v._v(" "),t("p",[v._v("练习：\n1、将centos 和 kali设定为 仅主机模式，永久关闭 NetworkManager 服务\n2、为centos配ip地址 192.168.1.1   网关 192.168.1.254\nkali配置ip 192.168.1.2  网关 配置 192.168.1.254\ndns 都配 202.106.0.20")]),v._v(" "),t("h2",{attrs:{id:"网络地址配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网络地址配置"}},[v._v("#")]),v._v(" 网络地址配置")]),v._v(" "),t("p",[v._v("1、确定系统的网卡信息和ip地址")]),v._v(" "),t("p",[v._v("ethernet 0 表示第一个网卡 1 表示第一个网卡")]),v._v(" "),t("p",[v._v("eth0 00:0c:29:bb:24:75")]),v._v(" "),t("p",[v._v("2、关闭network manager")]),v._v(" "),t("p",[v._v("service NetworkManager stop")]),v._v(" "),t("p",[v._v("chkconfig --level 345 NetworkManager off  永久关闭")]),v._v(" "),t("p",[v._v("3、配置网络地址")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("ip addr add 192.168.0.100/24 dev eth0\t#配置IP\n\t\nip link set eth0 up\t\t\t\t\t\t#唤醒网卡\n\nip route\t\t\t\t\t\t\t\t#查看网关\n\nip route add default  via 192.168.0.1 dev eth0\t\t#设置默认网关\n\nip addr del 192.168.0.100/24 dev eth0 \t#删除ip\n")])])]),t("p",[v._v("配置dns")]),v._v(" "),t("p",[v._v("vim etc/resolv.conf")]),v._v(" "),t("p",[v._v("nameserver dns地址")]),v._v(" "),t("p",[v._v("通过配置文件配置网络地址")]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("vim /etc/sysconfig/network-scripts/ifcfg-eth0 \n\nDEVICE=eth0                   \t\t\t\t\t\t#网卡设备名称\nTYEP=Ethernet\t\t\t\t\t\t\t\t\t\t#类型\nONBOOT=yes  \t\t\t\t\t\t\t\t\t\t#是否允许network服务管理\nBOOTPROTO=none {static|dhcp}  \t\t\t\t\t\t#ip地址获取方式\nIPADDR=10.0.105.xx\t\t\t\t\t\t\t\t\t#ip地址\nNETMASK=255.255.255.0\t\t\t\t\t\t\t\t#子网掩码\nGATEWAY=10.0.105.1\t\t\t\t\t\t\t\t\t#网关\nDNS1=xxx\t\t\t\t\t\t\t\t\t\t\t#dns\nDNS2=xxx\n\nservice network restart\n")])])]),t("p",[v._v("linux开启内核路由转发功能")]),v._v(" "),t("p",[v._v("vim /etc/sysctl.conf \t\t\t #编辑内核文件")]),v._v(" "),t("p",[v._v("net.ipv4.ip_forword = 1\t\t#打开路由转发")]),v._v(" "),t("p",[v._v("sysclt -p\t\t\t\t\t\t\t\t#刷新配置")]),v._v(" "),t("p",[v._v("关闭防火墙")]),v._v(" "),t("p",[v._v("setup")]),v._v(" "),t("p",[v._v("选择 Firewall configuration\t按下回车")]),v._v(" "),t("p",[v._v("*代表开启 用空间键改为空白即为关闭")]),v._v(" "),t("h2",{attrs:{id:"日志管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志管理"}},[v._v("#")]),v._v(" 日志管理")]),v._v(" "),t("p",[v._v("日志文件管理")]),v._v(" "),t("p",[v._v("/var")]),v._v(" "),t("p",[v._v("日志分类")]),v._v(" "),t("ul",[t("li",[t("p",[v._v("系统日志")]),v._v(" "),t("p",[v._v("messages")])]),v._v(" "),t("li",[t("p",[v._v("登录日志")]),v._v(" "),t("p",[v._v("sucure")])]),v._v(" "),t("li",[t("p",[v._v("程序日志")])])]),v._v(" "),t("p",[v._v("日志的管理服务")]),v._v(" "),t("p",[v._v("vim /etc/rsyslog.conf  日志服务文件")]),v._v(" "),t("p",[v._v("tail -f  /var/log/secure\t跟踪日志信息")]),v._v(" "),t("p",[v._v("man rsyslog.conf\t查看日志服务文件帮助")]),v._v(" "),t("p",[v._v("日志信息严重级别（由轻到重）")]),v._v(" "),t("p",[v._v("debug，info，notice，warning，warn（same as warning），err，error（same as err），crit，alert，emerg，panic（same as emerg）")]),v._v(" "),t("p",[v._v('logger  -p authpriv.emerg "==test=="')]),v._v(" "),t("p",[v._v("日志异地备份")]),v._v(" "),t("p",[v._v("日志的服务器建立")])])}),[],!1,null,null,null);n.default=e.exports}}]);